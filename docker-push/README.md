<!-- This document is automatically generated -- Do Not edit by hand! -->
# docker-push

Push Docker images to Google Artifact Registry (GAR) and optionally GitHub Container Registry
(GHCR).


## Inputs

| Name | Description | Required | Default |
|------|-------------|----------|---------|
| `project_id` | GCP `project_id` used to construct the service account. | True | |
| `image_tags` | Newline-delimited list of images to be pushed. Typically generated by [mozilla-it/deploy-actions/docker-build](../docker-build/README.md), but may also be provided manually. See [GAR](https://cloud.google.com/artifact-registry/docs/docker/pushing-and-pulling) and [GHCR](https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-container-registry#pushing-container-images) for how to tag images. | True | |
| `workload_identity_pool_project_number` | Project number of the workload identity pool used for OIDC authentication. Often available in the `vars` context as `${{ vars.GCPV2_WORKLOAD_IDENTITY_POOL_PROJECT_NUMBER }}`. See [these docs](https://mozilla-hub.atlassian.net/wiki/spaces/SRE/pages/997163545/How+to+Publish+Container+Images+to+GAR) for details. | True | |
| `should_authenticate_to_ghcr` | Whether or not to authenticate to GitHub Container Registry. Set this to `true` if one of the image tags includes `ghcr.io`. | False | `false`|
| `service_account_name` | Service account used to authenticate to GAR. | False | `artifact-writer`|
| `gar_location` | GCP region where the target GAR is located. | False | `us`|



## Example Usage
### Minimal Configuration
```yaml
- uses: mozilla-it/deploy-actions/docker-push
  with:
    project_id: moz-fx-tenant-prod
    image_tags: |
      us-docker.pkg.dev/moz-fx-tenant-prod/tenant-prod/my-service:v1.0.0
      ghcr.io/mozilla/my-repo/my-service:v1.0.0
    workload_identity_pool_project_number: ${{ vars.GCPV2_WORKLOAD_IDENTITY_POOL_PROJECT_NUMBER }}
```

### Minimal Configuration with Defaults
```yaml
- uses: mozilla-it/deploy-actions/docker-push
  with:
    project_id: moz-fx-tenant-prod
    image_tags: |
      us-docker.pkg.dev/moz-fx-tenant-prod/tenant-prod/my-service:v1.0.0
      ghcr.io/mozilla/my-repo/my-service:v1.0.0
    workload_identity_pool_project_number: ${{ vars.GCPV2_WORKLOAD_IDENTITY_POOL_PROJECT_NUMBER }}
    should_authenticate_to_ghcr: false
    service_account_name: artifact-writer
    gar_location: us
```

